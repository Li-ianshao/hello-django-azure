<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Stock Table</title>
  {% load static %}
  <link rel="stylesheet" type="text/css" href="{% static 'stocks/style.css' %}">
</head>
<body>
  <form action="{% url 'logout' %}" method="post">
      {% csrf_token %}
      <button type="submit">ç™»å‡º</button>
  </form>
  <h2 style="text-align: center;">ðŸ“ˆ Stock Overview</h2>
  <table>
    <thead>
      <tr>
        <th>Ticker</th>
        <th>Close</th>
        <th>volume</th>
        <th>dividend</th>
        <th>dividend_date</th>
        <th>RSI</th>
      </tr>
    </thead>
    <tbody>
      {% for s in stocks %}
      <tr>
          <td>{{ s.symbol }}</td>

          <td>{{ s.close }}</td>

          <td title="{% if s.volume > 100000000 %}é«˜æˆäº¤é‡{% else %}æ­£å¸¸æˆäº¤é‡{% endif %}"
              class="{% if s.volume|default:0 > 100000000 %}high-volume{% endif %}">
              {{ s.volume }}
          </td>

          <td title="{% if not s.dividend or s.dividend == 0 or s.dividend == 'N/A' %}æ­¤è‚¡ç¥¨ä¸é…æ¯{% else %}é…æ¯ä¸­{% endif %}"
              class="{% if not s.dividend or s.dividend == 0 %}no-dividend{% endif %}">
              {{ s.dividend }}
          </td>

          <td title="{% if s.dividend_date == 'N/A' %}ç„¡å¯ç”¨é…æ¯æ—¥è³‡æ–™{% else %}é…æ¯æ—¥ (ex-dividend date){% endif %}">
              {{ s.dividend_date }}
          </td>

          <td title="{% if s.rsi != 'N/A' %}
                      {% if s.rsi > 70 %}
                          RSI éŽç†± (>70)
                      {% elif s.rsi < 30 %}
                          RSI è¶…è·Œ (<30)
                      {% else %}
                          RSI æ­£å¸¸ç¯„åœ
                      {% endif %}
                    {% else %}
                        ç„¡ RSI è³‡æ–™
                    {% endif %}"
              class="
                  {% if s.rsi != 'N/A' %}
                      {% if s.rsi > 70 %}
                          rsi-high
                      {% elif s.rsi < 30 %}
                          rsi-low
                      {% endif %}
                  {% endif %}
              ">
              {{ s.rsi }}
          </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
